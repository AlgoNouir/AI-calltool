
# ๐ง Orchestration Class โ Agent Collaboration Layer

## ๐ ุชูุถุญ ฺฉู

ฺฉูุงุณ `Orchestration` ุจุฎุด ุงุฒ ุณุณุชู ฺูุฏุนุงูููโ ุดูุงุณุช ฺฉู ุจุง ูุฏู **ุงุชุตุงู ู ูุฏุฑุช Agentูุง ูุฎุชูู** ุทุฑุงุญ ุดุฏู ุงุณุช. ุงู ฺฉูุงุณ ฺฉ Agent ูุณุชูู ูุฒ ูุณุชุ ู ุจุง ุงุณุชูุงุฏู ุงุฒ ูุฏูโูุง ุฒุจุงู (ูุซู LLM)ุ ุจูุชุฑู Agent ุฑุง ุจุฑุง ุงูุฌุงู ฺฉ ูุธูู ุฎุงุต ุงูุชุฎุงุจ ูโฺฉูุฏ ู ุชุนุงูู ุฑุง ูุฏุงุช ูโฺฉูุฏ.

---

## โ ฺฉุงุฑุจุฑุฏ ุงุตู

* ุซุจุช Agentูุง ูุฎุชูู ุจุง ุชูุตู ูุงุจูุชโูุงุดุงู
* ุงูุชุฎุงุจ ููุดููุฏุงูู ุจูุชุฑู Agent ุจุฑุง ูุฑ ุฏุฑุฎูุงุณุช
* ุงุฑุณุงู ูพุงู (Prompt) ุจู ุขู Agent ู ุฏุฑุงูุช ูพุงุณุฎ
* ูุงู ูุงู ุจู ฺฉุงุฑุจุฑ ู ุณุณุชู Agentูุง

---

## ๐งฑ ุณุงุฎุชุงุฑ ฺฉูุงุณ

```python
class Orchestration(Agent):
```

ฺฉูุงุณ `Orchestration` ุงุฒ ฺฉูุงุณ ูพุงู `Agent` ุงุฑุซโุจุฑ ูโฺฉูุฏ ู ุจู ููู ุฏูู ูุงุจูุช ุชุนุงูู ุฒุจุงู (ูุซูุงู ุจุง LLM) ุฑุง ูุฒ ุฏุงุฑุฏ.

---

## โ๏ธ ูพุงุฑุงูุชุฑูุง ุณุงุฒูุฏู

```python
def __init__(self, modelName, maxRetray=3, baseUrl="http://localhost:11434"):
```

| ูพุงุฑุงูุชุฑ     | ุชูุถุญ                                      |
| ----------- | ------------------------------------------ |
| `modelName` | ูุงู ูุฏู LLM ููุฑุฏ ุงุณุชูุงุฏู ุฏุฑ Agent ูุงุฏุฑ     |
| `maxRetray` | ุชุนุฏุงุฏ ุชูุงุด ูุฌุฏุฏ ุฏุฑ ุตูุฑุช ุฎุทุง                |
| `baseUrl`   | ุขุฏุฑุณ ุณุฑูุณ LLM (ูุซู ollama ุง ฺฉ API ูุญู) |

---

## ๐ ูฺฺฏโูุง

### ๐ง `self.agents: dict[Agent, str]`

* ูฺฏูุฏุงุฑูุฏูโ Agentูุง ุซุจุชโุดุฏู.
* ูุฑ Agent ุจุง ุชูุถุญ ุชูุงูููุฏโูุงุด (`_descibe_yourself()`) ุฏุฑ ุฏฺฉุดูุฑ ุฐุฎุฑู ูโุดูุฏ.

---

## ๐ง ูุชุฏูุง

### `register(agent: Agent)`

ุซุจุช ฺฉ Agent ุฌุฏุฏ ุฏุฑ ุณุณุชู:

```python
def register(self, agent: Agent) -> None:
```

* ูุฑุงุฎูุงู `agent._descibe_yourself()` ุจุฑุง ุงุณุชุฎุฑุงุฌ ุชูุตู ุชูุงูููุฏโูุง.
* Agent ู ุชูุตู ุขู ุฏุฑ `self.agents` ุฐุฎุฑู ูโุดูุฏ.

---

### `selectAgent(desier: str) -> Agent`

ุงูุชุฎุงุจ ููุดููุฏุงููโ ุจูุชุฑู Agent ุจุฑุง ฺฉ ูุธูู:

```python
def selectAgent(self, desier: str) -> Agent:
```

* ุจุง ุงุณุชูุงุฏู ุงุฒ ูุฏู ุฒุจุงู (LLM) ุงุฒ ุจู Agentูุง ุซุจุชโุดุฏู ุงูุชุฎุงุจ ูโฺฉูุฏ.
* ุณุคุงู ุงุฒ ูุฏู: ยซฺฉุฏุงู Agent ุจุฑุง ุงู ูุธูู ููุงุณุจ ุงุณุชุยป
* ูพุงุณุฎ ูุฏู ุจู ุตูุฑุช index ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ.
* ุฎุฑูุฌ: ฺฉ ููููู ุงุฒ ฺฉูุงุณ `Agent`.

---

### `invoke(desier: str) -> str`

ูุชุฏ ุงุตู ุจุฑุง ุฏุฑุงูุช ูพุงุณุฎ ุงุฒ ุณุณุชู:

```python
def invoke(self, desier: str) -> str:
```

* ุงุจุชุฏุง `selectAgent` ุฑุง ุจุฑุง ุงูุชู Agent ููุงุณุจ ูุฑุงุฎูุงู ูโฺฉูุฏ.
* ุณูพุณ ูพุงู ุฑุง ุจู ุขู Agent ุงุฑุณุงู ูโฺฉูุฏ ู ูพุงุณุฎ ุฑุง ุจุงุฒ ูโฺฏุฑุฏุงูุฏ.

---

## ๐ซ @property `_ignoreFuncs`

```python
@property
def _ignoreFuncs(self):
```

ูุณุช ุงุฒ ูุชุฏูุง ฺฉู ูุจุงุฏ ุชูุณุท Agent ูุงุฏุฑ (ูุซูุงู ุฏุฑ ูพุงุณุฎโุฏู ุฎูุฏฺฉุงุฑ) ุงุณุชูุงุฏู ุดููุฏ. ุดุงูู:

* `register`
* `invoke`
* `selectAgent`
* ุชูุงุจุน ูพุงูโ ฺฉูุงุณ ูุงุฏุฑ

---

## ๐ ูุญูู ุงุณุชูุงุฏู (Usage)

```python
# ุชุนุฑู ฺฉ ุงุฑฺฉุณุชุฑุงุณูู
orch = Orchestration(modelName="mistral")

# ุซุจุช Agentูุง
orch.register(math_agent)
orch.register(chat_agent)

# ูพุฑุฏุงุฒุด ฺฉ ุฏุฑุฎูุงุณุช ฺฉุงุฑุจุฑ
response = orch.invoke("ูุทูุงู ฑฒ * ณ ุฑุง ูุญุงุณุจู ฺฉู")
print(response)
```

---

## ๐งฉ ูุงุจูุชโูุง ูุงุจู ฺฏุณุชุฑุด (Ideas)

| ูุงุจูุช ูพุดููุงุฏ                                | ุชูุถุญ                                 |
| ---------------------------------------------- | ------------------------------------- |
| ุงุณุชูุงุฏู ุงุฒ ุงูุชุงุฒ (scoring) ุจูโุฌุง ุงูุชุฎุงุจ ูุงุญุฏ | ูุซูุงู top-k agent ู vote ฺฉุฑุฏู         |
| ูฺฏูุฏุงุฑ ุชุงุฑุฎฺู ฺฏูุชฺฏููุง                        | ุจุฑุง ุญูุธ context ู ุจุฑุฑุณ ูุงฺฏโูุง       |
| async ุจูุฏู ุจุฑุง scale ุจุงูุง                     | ุจุง ุงุณุชูุงุฏู ุงุฒ `async def` ู `asyncio` |
| ูุฏู route ูุฑฺฉุฒ (ูุซู `router LLM`)             | ุงูุชุฎุงุจ Agent ุจุง ูุฏู ุฒุจุงู ุฌุฏุงฺฏุงูู      |

---

## ๐ ูุงุจุณุชฺฏโูุง

* `aaaai.agent.Agent`: ฺฉูุงุณ ูพุงูโ Agent ุดูุง
* ฺฉ backend ูุซู Ollama ุง ุณุฑูุณ LLM ููฺฉุงู ุจุฑุง ูพุงุณุฎโุฏู

---

## ๐ ุชูุถุญ ูู `select(...)`

```python
selectedIndex = self.select(prompt, options_dict)
```

* ุงู ุชุงุจุน ุงุฒ ฺฉูุงุณ ูุงุฏุฑ ุจู ุงุฑุซ ูโุฑุณุฏ ู ุจุฑุง **ุงูุชุฎุงุจ ฺฉ ุงุฒ ฺฏุฒููโูุง ุจุง ฺฉูฺฉ LLM** ุงุณุชูุงุฏู ูโุดูุฏ.
* `options_dict` ุจุงุฏ ุฏฺฉุดูุฑ `{index: description}` ุจุงุดุฏ.
* ุฎุฑูุฌ `selectedIndex` ุจู ุตูุฑุช string (ูุซูุงู `"0"`) ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ.
